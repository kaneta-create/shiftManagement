import{a as u,r as U,w as F,o as l,c as r,b,u as g,d as L,F as p,Z as N,e as t,f as R,g as f,h as y,i as V,v as E,t as a,n as k}from"./app-6bd2b245.js";import{_ as z}from"./AuthenticatedLayout-6ac1d6f1.js";import{_ as H}from"./CreateShiftModal-beee799e.js";import{F as O}from"./FlashMessage-c340222e.js";import{d as P}from"./index-42301fcb.js";import"./ApplicationLogo-047ef43c.js";const Z={class:"py-4 bg-gray-300"},q={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},G={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},J={class:"p-6 text-gray-900"},K={class:"flex flex-col text-center w-full mb-8"},Q=t("h1",{class:"sm:text-4xl text-3xl font-mono title-font mb-4 text-gray-900"},"シフト表",-1),X=t("p",{id:"explanation",class:"lg:w-2/3 mx-auto text-center leading-relaxed text-sm text-gray-600"},"変更したい日付を選択して入力してください。",-1),ee={id:"changeShift",class:"mb-4"},te={key:0,class:"mb-4"},oe=t("h3",{class:"text-xl mt-8 mb-4"},"変更内容",-1),se={class:"table-auto w-full text-left whitespace-no-wrap"},ne=t("thead",null,[t("tr",null,[t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-white text-sm bg-gray-500"},"名前"),t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-white text-sm bg-gray-500"},"日付"),t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-white text-sm bg-gray-500"},"出勤時間"),t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-white text-sm bg-gray-500"},"退勤時間"),t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-white text-sm bg-gray-500 text-nowrap"},"削除")])],-1),le={class:"px-4 py-3 border-b-2 border-gray-200"},re={class:"px-4 py-3 border-b-2 border-gray-200"},ae={class:"px-4 py-3 border-b-2 border-gray-200"},de={class:"px-4 py-3 border-b-2 border-gray-200"},ie={class:"border-b-2 border-gray-200 w-10 text-center"},ce=["onClick"],_e=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})],-1),ue=[_e],he=t("button",{class:"bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded"}," 変更を確定 ",-1),me={key:1,class:"flex justify-end mt-4"},pe={class:"overflow-x-auto"},ge={key:0,class:"absolute bg-black text-white text-xs rounded py-1 px-2"},fe={key:1,class:"mb-8"},ye=t("h1",null,"勤務時間登録を行うとシフト表が表示されます。",-1),be=[ye],xe={key:2,class:"min-w-full bg-white border border-gray-300"},ve={id:"th1",class:"border border-gray-300 test-white bg-gray-100"},ke=["value"],we=["value"],Me=["value"],Se={id:"date"},Ie=t("th",{id:"th3",class:"border text-xs text-white border-gray-300 bg-gray-500"},[t("div",{class:""},"時間"),t("div",{class:"border-t border-gray-300 my-1"}),t("div",{class:"vertical-text"},"日数")],-1),De={id:"td1",class:"border border-gray-300 text-sm px-2 py-2 bg-gray-500 text-white"},Te={key:0,class:"text-center text-xs"},Ce={key:0},We={class:"border-t"},Ye={id:"td3",class:"border border-gray-300 text-center px-2 py-2 bg-gray-50"},je={class:"text-xs"},Be={class:"border-t text-xs"},Re={__name:"index",props:{shifts:Array,month:Array,firstMonth:Array,names:Array,totalWorkingTimes:Object,userId:Number,userRole:Object},setup(w){const o=w;u(!1);const M=(e,n,s,c)=>{if(n===e&&s===c)return!0},d=U({selectedMonth:o.month[0][1].firstMonth});let h=u([]),_=u([]);const S=()=>{h.value=[],_.value=[],o.month.forEach(e=>{d.selectedMonth===o.month[0][1].firstMonth?e[1]&&h.value.push({Ymd_date:e[1].Ymd_date,full_date:e[1].full_date,date:e[1].date,day_of_week:e[1].day_of_week,year:e[1].year,firstMonth:e[1].firstMonth,secondMonth:e[1].secondMonth,thirdMonth:e[1].thirdMonth}):d.selectedMonth===o.month[0][1].secondMonth?e[2]&&h.value.push({Ymd_date:e[2].Ymd_date,full_date:e[2].full_date,date:e[2].date,day_of_week:e[2].day_of_week,year:e[2].year,firstMonth:e[2].firstMonth,secondMonth:e[2].secondMonth,thirdMonth:e[2].thirdMonth}):e[3]&&h.value.push({Ymd_date:e[3].Ymd_date,full_date:e[3].full_date,date:e[3].date,day_of_week:e[3].day_of_week,year:e[3].year,firstMonth:e[3].firstMonth,secondMonth:e[3].secondMonth,thirdMonth:e[3].thirdMonth})})},I=()=>{_.value=[],o.shifts.forEach((e,n)=>{d.selectedMonth===o.month[0][1].firstMonth?e[0]&&_.value.push({employee_id:e[0].employee_id,clock_in:e[0].clock_in,clock_out:e[0].clock_out,day_of_week:e[0].day_of_week,employee_name:e[0].employee_name,full_date:e[0].full_date,date:e[0].date}):d.selectedMonth===o.month[0][1].secondMonth?e[1]&&_.value.push({employee_id:e[1].employee_id,clock_in:e[1].clock_in,clock_out:e[1].clock_out,day_of_week:e[1].day_of_week,employee_name:e[1].employee_name,full_date:e[1].full_date,date:e[1].date}):e[2]&&_.value.push({employee_id:e[2].employee_id,clock_in:e[2].clock_in,clock_out:e[2].clock_out,day_of_week:e[2].day_of_week,employee_name:e[2].employee_name,full_date:e[2].full_date,date:e[2].date})})};F(()=>d.selectedMonth,()=>{S(),I()},{immediate:!0}),u([""]);const D=e=>{let n=[];return d.selectedMonth===o.month[0][1].firstMonth?n=o.totalWorkingTimes[1][e].total_working_hours:d.selectedMonth===o.month[0][1].secondMonth?n=o.totalWorkingTimes[2][e].total_working_hours:n=o.totalWorkingTimes[3][e].total_working_hours,n};u([""]);const T=e=>{let n=[];return d.selectedMonth===o.month[0][1].firstMonth?n=o.totalWorkingTimes[1][e].attendance_count:d.selectedMonth===o.month[0][1].secondMonth?n=o.totalWorkingTimes[2][e].attendance_count:n=o.totalWorkingTimes[3][e].attendance_count,n},C=()=>{window.print()},i=u([]),W=e=>{i.value.push(...e),console.log("親コンポーネントで受け取ったデータ: ",i.value)},Y=e=>{P.Inertia.put(route("createShifts.store",{createShift:e}),{shiftUpdates:i.value},{onBefore:()=>{confirm("変更しますか？")}})},j=()=>{i.value="",location.reload()};function B(e){i.value.splice(e,1),i.value[e]=[""]}const x=u(!1);return(e,n)=>(l(),r(p,null,[b(g(N),{title:"シフト表"}),b(z,{userRole:o.userRole.authority},{default:L(()=>[t("div",Z,[t("div",q,[t("div",G,[t("div",J,[t("div",K,[b(O),t("form",{onSubmit:n[3]||(n[3]=R(s=>Y(o.userId),["prevent"]))},[Q,X,t("div",ee,[i.value&&i.value.length>0?(l(),r("div",te,[oe,t("table",se,[ne,t("tbody",null,[(l(!0),r(p,null,f(i.value,(s,c)=>(l(),r("tr",{key:c,class:k({"even:bg-gray-50 odd:bg-whit":c%2==1})},[t("td",le,a(s.employee_name),1),t("td",re,a(s.date),1),t("td",ae,a(s.clock_in?s.clock_in:"休日"),1),t("td",de,a(s.clock_out?s.clock_out:"休日"),1),t("td",ie,[t("button",{type:"button",onClick:v=>B(c),class:"bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded"},ue,8,ce)])],2))),128))])]),t("div",{class:"flex justify-around mt-2"},[he,t("button",{type:"button",onClick:j,class:"bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded"}," 変更をクリア ")])])):y("",!0),i.value.length==0?(l(),r("div",me,[t("button",{type:"button",id:"printBtn",onClick:C,class:"bg-indigo-600 hover:bg-indigo-700 flex text-white py-2 px-4 rounded"}," 印刷 ")])):y("",!0)]),t("div",pe,[x.value?(l(),r("div",ge," クリックして月を変更できます ")):y("",!0),o.shifts.length==0?(l(),r("div",fe,be)):(l(),r("table",xe,[t("thead",null,[t("tr",null,[t("th",ve,[t("div",null,[V(t("select",{"onUpdate:modelValue":n[0]||(n[0]=s=>d.selectedMonth=s),onMouseover:n[1]||(n[1]=s=>x.value=!0),onMouseleave:n[2]||(n[2]=s=>x.value=!1),class:"border-none text-center py-1 bg-gray-50"},[t("option",{value:o.month[0][1].firstMonth},a(o.month[0][1].firstMonth),9,ke),t("option",{value:o.month[0][1].secondMonth},a(o.month[0][1].secondMonth),9,we),t("option",{value:o.month[0][1].thirdMonth},a(o.month[0][1].thirdMonth),9,Me)],544),[[E,d.selectedMonth]])])]),(l(!0),r(p,null,f(g(h),(s,c)=>(l(),r("th",{id:"th2",key:c,class:"bg-gray-500 border text-white border-gray-300 text-center"},[t("div",{class:k([{"hover:bg-indigo-500":s.date>new Date().getDate()},"border-b flex justify-center items-center"])},[b(H,{date:s.date,shifts:g(_),day_of_week:s.day_of_week,full_date:s.full_date,Ymd_date:s.Ymd_date,userId:o.userId,employeeInfo:o.names,onUpdateShiftData:W},null,8,["date","shifts","day_of_week","full_date","Ymd_date","userId","employeeInfo"])],2),t("div",Se,a(s.day_of_week),1)]))),128)),Ie])]),t("tbody",null,[(l(!0),r(p,null,f(o.names,(s,c)=>(l(),r("tr",{key:c,class:"hover:bg-blue-200"},[t("td",De,a(s.employee_name),1),(l(!0),r(p,null,f(g(h),(v,$)=>(l(),r("td",{id:"td2",key:$,class:"border border-gray-300 py-2 bg-gray-50"},[(l(!0),r(p,null,f(g(_),(m,A)=>(l(),r("div",{key:A},[M(m.employee_name,s.employee_name,v.date,m.date)?(l(),r("div",Te,[m.clock_in===900&&m.clock_out===900?y("",!0):(l(),r("div",Ce,[t("div",null,a(m.clock_in.toString().padStart(4,"0")),1),t("div",We,a(m.clock_out.toString().padStart(4,"0")),1)]))])):y("",!0)]))),128))]))),128)),t("td",Ye,[t("div",je,a(D(s.employee_id)),1),t("div",Be,a(T(s.employee_id)),1)])]))),128))])]))])],32)])])])])])]),_:1},8,["userRole"])],64))}};export{Re as default};
