import{r as k,k as j,o as n,c as a,b as f,u as p,d as S,F as c,Z as $,e as t,f as V,i as b,A as C,g as _,j as O,t as u,h,n as g,v as y}from"./app-ae569188.js";import{_ as E}from"./AuthenticatedLayout-17c4240c.js";import"./index-5d69c520.js";import"./ApplicationLogo-76ede44f.js";const M={class:"py-4 bg-gray-300"},U={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},B={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},L={class:"p-6 text-gray-900"},R=t("div",null,[t("h1",{class:"sm:text-4xl text-center text-3xl font-mono title-font mb-4 text-gray-900"},"シフト登録"),t("p",{class:"lg:w-2/3 mx-auto text-center leading-relaxed text-sm text-gray-600"},"社員番号と時間を入力して勤務時間を変更してください")],-1),D={class:"text-center my-8"},F=t("label",{for:"employee_number",class:"mr-2"},"社員番号:",-1),T={key:0,class:"text-red-600"},H={key:1,class:"text-red-600"},q={class:"lg:w-3/4 w-full mx-auto overflow-auto"},z={class:"table-fixed w-full"},A=t("thead",null,[t("tr",null,[t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-white text-sm bg-gray-500 rounded-tl rounded-bl"},"曜日"),t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-white text-sm bg-gray-500"},"出勤時間"),t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-white text-sm bg-gray-500"},"退勤時間"),t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-white text-sm bg-gray-500"}," 削除 ")])],-1),Z={class:"border-y-2 border-gray-200 px-4 py-3 text-center"},G={class:"border-y-2 border-gray-200 px-4 py-3 relative"},I=["onUpdate:modelValue"],J=t("option",{value:"",disabled:""},"-- 選択 --",-1),K=["value"],P={key:0,class:"absolute mb-5 text-red-600 text-sm -bottom-6 left-0 whitespace-nowrap"},Q={class:"border-y-2 border-gray-200 px-4 py-3"},X=["onUpdate:modelValue"],Y=t("option",{value:"",disabled:""},"-- 選択 --",-1),W=["value"],tt={class:"border-y-2 border-gray-200 px-4 py-3 w-full"},et=["disabled","onClick"],st=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})],-1),ot=[st],rt=t("div",{class:"mt-6"},[t("button",{dusk:"update-defaultShift-button",class:"flex mx-auto text-white bg-indigo-600 border-0 py-2 px-8 focus:outline-none hover:bg-indigo-700 rounded text-lg"}," 更新 ")],-1),mt={__name:"edit",props:{defaultShifts:Object,employeeNumber:Number,employee_id:Number,userRole:Object,errors:Object},setup(w){const d=w,l={1:"月曜日",2:"火曜日",3:"水曜日",4:"木曜日",5:"金曜日",6:"土曜日",7:"日曜日"},s=k({employeeNumber:d.employeeNumber,月曜日:{start_time:"",end_time:"",dayOfNameNumber:""},火曜日:{start_time:"",end_time:"",dayOfNameNumber:""},水曜日:{start_time:"",end_time:"",dayOfNameNumber:""},木曜日:{start_time:"",end_time:"",dayOfNameNumber:""},金曜日:{start_time:"",end_time:"",dayOfNameNumber:""},土曜日:{start_time:"",end_time:"",dayOfNameNumber:""},日曜日:{start_time:"",end_time:"",dayOfNameNumber:""}});j(()=>{Object.entries(l).forEach(([r,o])=>{s[o].dayOfNameNumber=r,s[o].start_time=="00:00"&&s[o].end_time=="00:00"&&(s[o].start_time="",s[o].end_time="")})}),d.defaultShifts.forEach(r=>{console.log(r),Object.entries(l).forEach(([o,e])=>{r.day_of_week==o&&(s[e].start_time=r.clock_in.slice(0,-3),s[e].end_time=r.clock_out.slice(0,-3))})});const v=r=>{Object.entries(l).forEach(([o,e])=>{r==o&&(s[e].start_time="",s[e].end_time="")})},N=r=>{O.put(`/defaultShifts/${r}`,s)},x=(()=>{const r=[];for(let o=0;o<24;o++)for(let e=0;e<60;e+=15){const m=String(o).padStart(2,"0"),i=String(e).padStart(2,"0");r.push(`${m}:${i}`)}return r})();return(r,o)=>(n(),a(c,null,[f(p($),{title:"出勤時間変更"}),f(E,{userRole:d.userRole.authority},{default:S(()=>[t("div",M,[t("div",U,[t("div",B,[t("div",L,[R,t("form",{onSubmit:o[1]||(o[1]=V(e=>N(d.defaultShifts[0].id),["prevent"]))},[t("div",D,[F,b(t("input",{type:"text",id:"employee_number",required:"",name:"employee_number","onUpdate:modelValue":o[0]||(o[0]=e=>s.employeeNumber=e),class:"rounded"},null,512),[[C,s.employeeNumber]])]),(n(!0),a(c,null,_(Object.keys(l),(e,m)=>(n(),a("div",{key:m},[d.errors&&d.errors[`${l[e]}.start_time`]?(n(),a("div",T," *"+u(d.errors[`${l[e]}.start_time`]),1)):h("",!0),d.errors&&d.errors[`${l[e]}.end_time`]?(n(),a("div",H," *"+u(d.errors[`${l[e]}.end_time`]),1)):h("",!0)]))),128)),t("div",q,[t("table",z,[A,t("tbody",null,[(n(),a(c,null,_(l,(e,m)=>t("tr",{key:m,class:g({"bg-gray-50":m%2!==1})},[t("td",Z,u(e),1),t("td",G,[b(t("select",{"onUpdate:modelValue":i=>s[e].start_time=i,class:"mb-2 rounded w-full"},[J,(n(!0),a(c,null,_(p(x),i=>(n(),a("option",{key:i,value:i},u(i),9,K))),128))],8,I),[[y,s[e].start_time]]),s[e].start_time&&s[e].end_time&&s[e].start_time>=s[e].end_time?(n(),a("div",P," *出勤時間は退勤時間より前に設定してください。 ")):h("",!0)]),t("td",Q,[b(t("select",{"onUpdate:modelValue":i=>s[e].end_time=i,class:"mb-2 rounded w-full"},[Y,(n(!0),a(c,null,_(p(x),i=>(n(),a("option",{key:i,value:i},u(i),9,W))),128))],8,X),[[y,s[e].end_time]])]),t("td",tt,[t("button",{disabled:!s[e].start_time,class:g([{"text-white bg-red-600 hover:bg-red-700":s[e].start_time,"text-gray-500 bg-gray-300 cursor-not-allowed":!s[e].start_time},"border-0 py-2 px-8 focus:outline-none rounded flex justify-center ml-8"]),type:"button",onClick:i=>v(s[e].dayOfNameNumber)},ot,10,et)])],2)),64))])])]),rt],32)])])])])]),_:1},8,["userRole"])],64))}};export{mt as default};
