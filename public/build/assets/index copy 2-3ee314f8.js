import{r as j,a as p,w as A,o as r,c as l,b as y,u as f,d as v,F as m,Z as U,e as t,f as $,g,h as b,i as O,v as R,t as a,j as V}from"./app-6bd2b245.js";import{_ as E}from"./AuthenticatedLayout-6ac1d6f1.js";import{_ as L}from"./RequestShiftModal-8c7cee78.js";import{F as P}from"./FlashMessage-c340222e.js";import"./index-42301fcb.js";import"./ApplicationLogo-047ef43c.js";const Z=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"シフト表",-1),q={class:"py-12"},z={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},G={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},H={id:"printB",class:"p-6 text-gray-900"},J={class:"flex flex-col text-centerw-full mb-8"},K=t("h1",{class:"sm:text-4xl text-3xl font-medium title-font mb-2 text-gray-900"},"シフト表",-1),Q={class:"mb-4"},X={key:0,class:"mb-4"},ee=t("h3",null,"変更内容",-1),te={class:"table-auto w-full text-left whitespace-no-wrap"},oe=t("thead",null,[t("tr",null,[t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-100 rounded-tl rounded-bl"},"名前"),t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-100 rounded-tl rounded-bl"},"日付"),t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-100"},"出勤時間"),t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-100"},"退勤時間"),t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-100"},"削除")])],-1),se={class:"px-4 py-3 border-b-2 border-gray-200"},ne={class:"px-4 py-3 border-b-2 border-gray-200"},re={class:"px-4 py-3 border-b-2 border-gray-200"},le={class:"px-4 py-3 border-b-2 border-gray-200"},ae={class:"border-t-2 border-b-2 border-gray-200 w-10 text-center"},de=["onClick"],ce=t("button",{class:"bg-green-500 text-white py-2 px-4 rounded"}," 変更を確定 ",-1),ie={class:"print_shift"},_e={class:"overflow-x-auto"},ue={class:"min-w-full bg-white border border-gray-300"},he={class:"border border-gray-300 bg-gray-100"},me=["value"],pe=["value"],ge=["value"],ye=t("div",{class:"border-t border-gray-300"},null,-1),fe=t("div",null,"名前",-1),be={class:"bg-gray-100"},xe=t("div",{class:"border-t border-gray-300 mt-1"},null,-1),ke={class:"text-center bg-gray-100"},ve=t("th",{class:"text-center border text-xs border-gray-300 bg-gray-100"},[t("div",{class:"text-center"},"時間"),t("div",{class:"border-t border-gray-300 mt-1"}),t("div",{class:"vertical-text text-center items-center"},"日数")],-1),Me={class:"border border-gray-300 text-sm px-2 py-2 bg-gray-100"},we={key:0,class:"text-center text-xs"},Se={key:0},Te={class:"border-t"},We={class:"border border-gray-300 text-center px-2 py-2"},De={class:"text-xs"},Ye={class:"border-t text-xs"},Ae={__name:"index copy 2",props:{shifts:Array,month:Array,firstMonth:Array,names:Array,totalWorkingTimes:Object,userId:Number,userName:String,userRole:Object,errors:Object},setup(M){const o=M,w=(e,n,s,i)=>{if(n===e&&s===i)return!0},d=j({selectedMonth:o.month[0][1].firstMonth});let u=p([]),h=p([]);const S=()=>{u.value=[],h.value=[],o.month.forEach(e=>{d.selectedMonth===o.month[0][1].firstMonth?e[1]&&u.value.push({Ymd_date:e[1].Ymd_date,full_date:e[1].full_date,date:e[1].date,day_of_week:e[1].day_of_week,year:e[1].year,firstMonth:e[1].firstMonth,secondMonth:e[1].secondMonth,thirdMonth:e[1].thirdMonth}):d.selectedMonth===o.month[0][1].secondMonth?e[2]&&u.value.push({Ymd_date:e[2].Ymd_date,full_date:e[2].full_date,date:e[2].date,day_of_week:e[2].day_of_week,year:e[2].year,firstMonth:e[2].firstMonth,secondMonth:e[2].secondMonth,thirdMonth:e[2].thirdMonth}):e[3]&&u.value.push({Ymd_date:e[3].Ymd_date,full_date:e[3].full_date,date:e[3].date,day_of_week:e[3].day_of_week,year:e[3].year,firstMonth:e[3].firstMonth,secondMonth:e[3].secondMonth,thirdMonth:e[3].thirdMonth})})},T=()=>{h.value=[],o.shifts.forEach((e,n)=>{d.selectedMonth===o.month[0][1].firstMonth?e[0]&&h.value.push({employee_id:e[0].employee_id,clock_in:e[0].clock_in,clock_out:e[0].clock_out,day_of_week:e[0].day_of_week,employee_name:e[0].employee_name,date:e[0].date}):d.selectedMonth===o.month[0][1].secondMonth?e[1]&&h.value.push({employee_id:e[1].employee_id,clock_in:e[1].clock_in,clock_out:e[1].clock_out,day_of_week:e[1].day_of_week,employee_name:e[1].employee_name,date:e[1].date}):e[2]&&h.value.push({employee_id:e[2].employee_id,clock_in:e[2].clock_in,clock_out:e[2].clock_out,day_of_week:e[2].day_of_week,employee_name:e[2].employee_name,date:e[2].date})})};A(()=>d.selectedMonth,()=>{S(),T()},{immediate:!0}),console.log(o.totalWorkingTimes[2][1].total_working_hours),p([""]);const W=e=>{let n=[];return d.selectedMonth===o.month[0][1].firstMonth?n=o.totalWorkingTimes[1][e].total_working_hours:d.selectedMonth===o.month[0][1].secondMonth?n=o.totalWorkingTimes[2][e].total_working_hours:n=o.totalWorkingTimes[3][e].total_working_hours,Math.floor(n)};p([""]);const D=e=>{let n=[];return d.selectedMonth===o.month[0][1].firstMonth?n=o.totalWorkingTimes[1][e].attendance_count:d.selectedMonth===o.month[0][1].secondMonth?n=o.totalWorkingTimes[2][e].attendance_count:n=o.totalWorkingTimes[3][e].attendance_count,n},Y=()=>{window.print()},c=p([]),I=e=>{c.value.push(...e),console.log("親コンポーネントで受け取ったデータ: ",c.value)},C=e=>{V.put(`/actualShifts/${e}`,{shiftUpdates:c.value},{onBefore:()=>{confirm("変更しますか？")},onFinish:()=>{x(),location.reload()}})},x=()=>{c.value=""};function B(e){c.value.splice(e,1)}return console.log(o.errors.isDayOff),(e,n)=>(r(),l(m,null,[y(f(U),{title:"シフト表"}),y(E,{userRole:o.userRole.authority},{header:v(()=>[Z]),default:v(()=>[t("div",q,[t("div",z,[t("div",G,[t("div",H,[t("div",J,[y(P),t("form",{onSubmit:n[1]||(n[1]=$(s=>C(o.userId),["prevent"]))},[K,t("div",Q,[c.value&&c.value.length>0?(r(),l("div",X,[ee,t("table",te,[oe,t("tbody",null,[(r(!0),l(m,null,g(c.value,(s,i)=>(r(),l("tr",{key:i},[t("td",se,a(o.userName),1),t("td",ne,a(s.date),1),t("td",re,a(s.clock_in?s.clock_in:"休日"),1),t("td",le,a(s.clock_out?s.clock_out:"休日"),1),t("td",ae,[t("button",{type:"button",onClick:k=>B(i),class:"bg-red-500 text-white py-2 px-4 rounded"},"削除",8,de)])]))),128))])]),t("div",{class:"flex justify-around mt-2"},[ce,t("button",{type:"button",onClick:x,class:"bg-red-500 text-white py-2 px-4 rounded"}," 変更をクリア ")])])):b("",!0),t("button",{type:"button",id:"printBtn",onClick:Y,class:"bg-blue-500 text-white py-2 px-4 rounded"}," 印刷 ")]),t("div",ie,[t("div",_e,[t("table",ue,[t("thead",null,[t("tr",null,[t("th",he,[t("div",null,[O(t("select",{"onUpdate:modelValue":n[0]||(n[0]=s=>d.selectedMonth=s),class:"border-none text-center py-1 bg-gray-100"},[t("option",{value:o.month[0][1].firstMonth},a(o.month[0][1].firstMonth),9,me),t("option",{value:o.month[0][1].secondMonth},a(o.month[0][1].secondMonth),9,pe),t("option",{value:o.month[0][1].thirdMonth},a(o.month[0][1].thirdMonth),9,ge)],512),[[R,d.selectedMonth]])]),ye,fe]),(r(!0),l(m,null,g(f(u),(s,i)=>(r(),l("th",{key:i,class:"border border-gray-300 bg-gray-100"},[t("div",be,[y(L,{date:s.date,shifts:o.shifts,full_date:s.full_date,Ymd_date:s.Ymd_date,userId:o.userId,onUpdateShiftData:I},null,8,["date","shifts","full_date","Ymd_date","userId"])]),xe,t("div",ke,a(s.day_of_week),1)]))),128)),ve])]),t("tbody",null,[(r(!0),l(m,null,g(o.names,(s,i)=>(r(),l("tr",{key:i},[t("td",Me,a(s.employee_name),1),(r(!0),l(m,null,g(f(u),(k,F)=>(r(),l("td",{key:F,class:"border border-gray-30 py-2"},[(r(!0),l(m,null,g(f(h),(_,N)=>(r(),l("div",{key:N},[w(_.employee_name,s.employee_name,k.date,_.date)?(r(),l("div",we,[_.clock_in===900&&_.clock_out===900?b("",!0):(r(),l("div",Se,[t("div",null,a(_.clock_in===0?"0000":_.clock_in),1),t("div",Te,a(_.clock_out),1)]))])):b("",!0)]))),128))]))),128)),t("td",We,[t("div",De,a(W(s.employee_id)),1),t("div",Ye,a(D(s.employee_id)),1)])]))),128))])])])])],32)])])])])])]),_:1},8,["userRole"])],64))}};export{Ae as default};
