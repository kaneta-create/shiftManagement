import{_ as j}from"./AuthenticatedLayout-2d6fda54.js";import{a as M,r as C,k as B,o as s,c as i,i as u,l as V,e as t,f as N,m as f,h as v,A as w,t as h,F as p,g as k,p as $,n as L,u as _,s as y,b as m,d as x,Z as I}from"./app-8b9ecc7e.js";import{F as H}from"./FlashMessage-1d978324.js";import{d as S}from"./index-bfccac7f.js";import"./ApplicationLogo-8621cb80.js";const R={class:"modal",id:"modal-1"},T={class:"modal__overlay",tabindex:"-1","data-micromodal-close":""},U={class:"modal__container",role:"dialog","aria-modal":"true","aria-labelledby":"modal-1-title"},F=t("header",{class:"modal__header"},[t("h2",{class:"modal__title",id:"modal-1-title"}," 権限変更 ")],-1),O={class:"modal__content",id:"modal-1-content"},A={class:"flex flex-col space-y-2"},Z={class:"inline-flex items-center"},z=t("span",{class:"ml-2"},"一般ユーザー権限",-1),D={class:"inline-flex items-center"},E=t("span",{class:"ml-2"},"シフト作成者権限",-1),P={class:"inline-flex items-center"},q=t("span",{class:"ml-2"},"管理者権限",-1),G=t("button",{class:"text-white bg-indigo-500 border-0 py-2 px-6 focus:outline-none hover:bg-indigo-600 rounded"},"更新",-1),J={__name:"MicroModal",props:{authority:String,id:Number,role:String},emits:["update:authority"],setup(d,{emit:n}){const c=M(!1),o=()=>{c.value=!c.value},a=d,e=C({authority:null,id:null,role:null});B(()=>{e.id=a.id,e.role=a.role,e.authority=a.authority});const g=b=>{S.Inertia.patch(route("admins.update",{admin:b}),e)};return(b,r)=>(s(),i(p,null,[u(t("div",R,[t("div",T,[t("div",U,[F,t("form",{onSubmit:r[5]||(r[5]=N(l=>g(a.id),["prevent"]))},[t("main",O,[t("div",A,[t("label",Z,[e.authority==1?u((s(),i("input",{key:0,type:"radio",name:"authority",value:"1","onUpdate:modelValue":r[0]||(r[0]=l=>e.authority=l),class:"form-radio text-blue-600"},null,512)),[[f,e.authority]]):v("",!0),z]),t("label",D,[u(t("input",{type:"radio",name:"authority",value:"2","onUpdate:modelValue":r[1]||(r[1]=l=>e.authority=l),class:"form-radio text-blue-600"},null,512),[[f,e.authority]]),E]),t("label",P,[u(t("input",{type:"radio",name:"authority",value:"3","onUpdate:modelValue":r[2]||(r[2]=l=>e.authority=l),class:"form-radio text-blue-600"},null,512),[[f,e.authority]]),q]),u(t("input",{type:"hidden",name:"id","onUpdate:modelValue":r[3]||(r[3]=l=>e.id=l),value:"props.id"},null,512),[[w,e.id]]),u(t("input",{type:"hidden",name:"role","onUpdate:modelValue":r[4]||(r[4]=l=>e.role=l),value:"props.role"},null,512),[[w,e.role]])])]),t("footer",{class:"modal__footer"},[t("button",{onClick:o,type:"button",class:"modal__btn","data-micromodal-close":"","aria-label":"Close this dialog window"},"閉じる"),G])],32)])])],512),[[V,c.value]]),t("td",{onClick:o},h(a.authority),1)],64))}},K={key:0},Q={class:"flex flex-wrap -mb-1 text-gray-500"},W=["innerHTML"],X={__name:"Pagination",props:{links:Array},setup(d){return(n,c)=>d.links.length>3?(s(),i("div",K,[t("div",Q,[(s(!0),i(p,null,k(d.links,(o,a)=>(s(),i(p,{key:a},[o.url===null?(s(),i("div",{key:0,class:"mr-1 mb-1 px-4 py-3 text-sm leading-4 text-gray-500 border rounded",innerHTML:o.label},null,8,W)):(s(),$(_(y),{key:1,class:L(["mr-1 mb-1 px-4 py-3 text-sm leading-4 border rounded hover:bg-indigo-400 focus:border-indigo-500 focus:text-gray-500",{"bg-indigo-500 text-white":o.active}]),href:o.url,innerHTML:o.label},null,8,["class","href","innerHTML"]))],64))),128))])])):v("",!0)}},Y={class:"py-4 bg-gray-300"},tt={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},et={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},ot={class:"p-6 text-gray-900"},st={class:"text-gray-600 body-font"},rt={class:"container px-5 py-2 mx-auto"},it=t("h1",{class:"sm:text-4xl text-center text-3xl font-mono title-font mb-4 text-gray-900"},"従業員一覧",-1),at={class:"flex justify-end my-4 lg:w-3/4 w-full mx-auto space-x-2"},nt=t("div",{class:"flex items-center"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})]),t("span",{class:"ml-1 items-center mt-1 hover:bg-indigo-700"},"新規登録iuggigk")],-1),lt={class:"lg:w-3/4 w-full mx-auto overflow-auto"},dt={class:"table-auto w-full text-left whitespace-no-wrap"},ct=t("thead",null,[t("tr",{class:"rounded"},[t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-white text-sm bg-gray-500 rounded-l"},"社員番号"),t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-white text-sm bg-gray-500"},"名前"),t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-white text-sm bg-gray-500"},"雇用形態"),t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-white text-sm bg-gray-500"},"権限"),t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-white text-sm bg-gray-500"},"パスワード"),t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-white text-sm bg-gray-500"},"編集"),t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-white text-sm bg-gray-500 rounded-r",style:{"white-space":"nowrap"}},"削除")])],-1),ut={class:"px-4 py-3 border-b-2 border-gray-200"},mt={class:"px-4 py-3 border-b-2 border-gray-200"},ht={class:"px-4 py-3 border-b-2 border-gray-200"},pt={class:"px-4 py-3 border-b-2 border-gray-200"},_t={key:0,class:"px-4 py-3 border-b-2 border-gray-200"},gt={key:1,class:"px-4 py-3 border-b-2 border-gray-200"},bt={class:"px-4 py-3 border-b-2 border-gray-200"},ft=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"})],-1),xt={key:1,class:"text-white text-nowrap border-b-2 bg-indigo-600 mt-1 border-0 py-2 px-2 focus:outline-none rounded flex items-center justify-center w-11 h-11"},yt=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"})],-1),wt=[yt],vt={class:"border-b-2 border-gray-200"},kt=["onClick"],$t=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})],-1),Lt=[$t],Vt={__name:"index",props:{employees:Object,paginate:Object,userRole:Object,alertMessage:String,defaultShiftId:Object,userNum:Number},setup(d){const n=d;console.log(n.defaultShiftId[7]);const c=o=>{const a=n.employees.find(e=>e.id===o);if(a&&a.employee_number===n.userNum){alert("このユーザは削除できません");return}S.Inertia.delete(route("admins.destroy",{admin:o}),{onBefore:()=>confirm("本当に削除しますか?")}),location.reload()};return(o,a)=>(s(),i(p,null,[m(_(I),{title:"従業員管理ページ"}),m(j,{userRole:n.userRole.authority},{default:x(()=>[t("div",Y,[t("div",tt,[t("div",et,[t("div",ot,[m(H),t("section",st,[t("div",rt,[it,t("div",at,[m(_(y),{as:"button",href:o.route("admins.create"),class:"text-white bg-indigo-600 border-0 py-2 px-6 focus:outline-none hover:bg-indigo-700 rounded"},{default:x(()=>[nt]),_:1},8,["href"])]),t("div",lt,[t("table",dt,[ct,t("tbody",null,[(s(!0),i(p,null,k(n.employees,(e,g)=>(s(),i("tr",{key:e.id,class:L({"even:bg-gray-50 odd:bg-whit":g%2===1})},[t("td",ut,h(e.employee_number),1),t("td",mt,h(e.name),1),t("td",ht,h(e.role),1),t("td",pt,[m(J,{authority:e.authority,id:e.id,role:e.role},null,8,["authority","id","role"])]),e.temporary_password?(s(),i("td",_t,h(e.temporary_password),1)):(s(),i("td",gt,"設定済み")),t("td",bt,[n.defaultShiftId[e.id]?(s(),$(_(y),{key:0,as:"button",href:o.route("defaultShifts.edit",{defaultShift:n.defaultShiftId[e.id]??0}),dusk:"edit-page-button",class:"text-white text-nowrap border-b-2 bg-indigo-600 mt-1 border-0 py-2 px-2 focus:outline-none hover:bg-indigo-700 rounded flex items-center justify-center"},{default:x(()=>[ft]),_:2},1032,["href"])):(s(),i("div",xt,wt))]),t("td",vt,[t("button",{onClick:b=>c(e.id),class:"text-white border-b-2 bg-red-600 mt-1 border-0 py-2 px-2 focus:outline-none hover:bg-red-700 rounded flex items-center justify-center"},Lt,8,kt)])],2))),128))])]),m(X,{class:"mt-6 flex justify-end",links:n.paginate.links},null,8,["links"])])])])])])])])]),_:1},8,["userRole"])],64))}};export{Vt as default};
