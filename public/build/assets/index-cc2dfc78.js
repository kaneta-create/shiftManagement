import{_ as j}from"./AuthenticatedLayout-17c4240c.js";import{a as C,r as M,k as S,o as s,c as n,i as h,l as B,e as t,f as V,m as f,h as v,A as w,t as p,F as _,g as k,p as N,n as $,u as b,s as y,b as c,d as x,Z as H}from"./app-ae569188.js";import{F as I}from"./FlashMessage-d554907c.js";import{d as L}from"./index-5d69c520.js";import"./ApplicationLogo-76ede44f.js";const R={class:"modal",id:"modal-1"},T={class:"modal__overlay",tabindex:"-1","data-micromodal-close":""},U={class:"modal__container",role:"dialog","aria-modal":"true","aria-labelledby":"modal-1-title"},A=t("header",{class:"modal__header"},[t("h2",{class:"modal__title",id:"modal-1-title"}," 権限変更 ")],-1),F={class:"modal__content",id:"modal-1-content"},O={class:"flex flex-col space-y-2"},Z={class:"inline-flex items-center"},z=t("span",{class:"ml-2"},"一般ユーザー権限",-1),D={class:"inline-flex items-center"},E=t("span",{class:"ml-2"},"シフト作成者権限",-1),P={class:"inline-flex items-center"},q=t("span",{class:"ml-2"},"管理者権限",-1),G=t("button",{class:"text-white bg-indigo-500 border-0 py-2 px-6 focus:outline-none hover:bg-indigo-600 rounded"},"更新",-1),J={__name:"MicroModal",props:{authority:String,id:Number,role:String},emits:["update:authority"],setup(u,{emit:d}){const m=C(!1),a=()=>{m.value=!m.value},r=u,e=M({authority:null,id:null,role:null});S(()=>{e.id=r.id,e.role=r.role,e.authority=r.authority});const o=g=>{L.Inertia.patch(route("admins.update",{admin:g}),e)};return(g,i)=>(s(),n(_,null,[h(t("div",R,[t("div",T,[t("div",U,[A,t("form",{onSubmit:i[5]||(i[5]=V(l=>o(r.id),["prevent"]))},[t("main",F,[t("div",O,[t("label",Z,[e.authority==1?h((s(),n("input",{key:0,type:"radio",name:"authority",value:"1","onUpdate:modelValue":i[0]||(i[0]=l=>e.authority=l),class:"form-radio text-blue-600"},null,512)),[[f,e.authority]]):v("",!0),z]),t("label",D,[h(t("input",{type:"radio",name:"authority",value:"2","onUpdate:modelValue":i[1]||(i[1]=l=>e.authority=l),class:"form-radio text-blue-600"},null,512),[[f,e.authority]]),E]),t("label",P,[h(t("input",{type:"radio",name:"authority",value:"3","onUpdate:modelValue":i[2]||(i[2]=l=>e.authority=l),class:"form-radio text-blue-600"},null,512),[[f,e.authority]]),q]),h(t("input",{type:"hidden",name:"id","onUpdate:modelValue":i[3]||(i[3]=l=>e.id=l),value:"props.id"},null,512),[[w,e.id]]),h(t("input",{type:"hidden",name:"role","onUpdate:modelValue":i[4]||(i[4]=l=>e.role=l),value:"props.role"},null,512),[[w,e.role]])])]),t("footer",{class:"modal__footer"},[t("button",{onClick:a,type:"button",class:"modal__btn","data-micromodal-close":"","aria-label":"Close this dialog window"},"閉じる"),G])],32)])])],512),[[B,m.value]]),t("td",{onClick:a},p(r.authority),1)],64))}},K={key:0},Q={class:"flex flex-wrap -mb-1 text-gray-500"},W=["innerHTML"],X={__name:"Pagination",props:{links:Array},setup(u){return(d,m)=>u.links.length>3?(s(),n("div",K,[t("div",Q,[(s(!0),n(_,null,k(u.links,(a,r)=>(s(),n(_,{key:r},[a.url===null?(s(),n("div",{key:0,class:"mr-1 mb-1 px-4 py-3 text-sm leading-4 text-gray-500 border rounded",innerHTML:a.label},null,8,W)):(s(),N(b(y),{key:1,class:$(["mr-1 mb-1 px-4 py-3 text-sm leading-4 border rounded hover:bg-indigo-400 focus:border-indigo-500 focus:text-gray-500",{"bg-indigo-500 text-white":a.active}]),href:a.url,innerHTML:a.label},null,8,["class","href","innerHTML"]))],64))),128))])])):v("",!0)}},Y={class:"py-4 bg-gray-300"},tt={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},et={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},ot={class:"p-6 text-gray-900"},st={class:"text-gray-600 body-font"},rt={class:"container px-5 py-2 mx-auto"},it=t("h1",{class:"sm:text-4xl text-center text-3xl font-mono title-font mb-4 text-gray-900"},"従業員一覧",-1),nt={class:"flex justify-end my-4 lg:w-3/4 w-full mx-auto space-x-2"},at=t("div",{class:"flex items-center"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})]),t("span",{class:"ml-1 items-center mt-1 hover:bg-indigo-700"},"新規従業員登録")],-1),lt={class:"lg:w-3/4 w-full mx-auto overflow-auto"},dt={class:"table-auto w-full text-left whitespace-no-wrap"},ct=t("thead",null,[t("tr",{class:"rounded"},[t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-white text-sm bg-gray-500 rounded-l"},"社員番号"),t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-white text-sm bg-gray-500"},"名前"),t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-white text-sm bg-gray-500"},"雇用形態"),t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-white text-sm bg-gray-500"},"権限"),t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-white text-sm bg-gray-500"},"パスワード"),t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-white text-sm bg-gray-500"},"編集"),t("th",{class:"px-4 py-3 title-font tracking-wider font-medium text-white text-sm bg-gray-500 rounded-r",style:{"white-space":"nowrap"}},"削除")])],-1),ut={class:"px-4 py-3 border-b-2 border-gray-200"},mt={class:"px-4 py-3 border-b-2 border-gray-200"},ht={class:"px-4 py-3 border-b-2 border-gray-200"},pt={class:"px-4 py-3 border-b-2 border-gray-200"},_t={key:0,class:"px-4 py-3 border-b-2 border-gray-200"},gt={key:1,class:"px-4 py-3 border-b-2 border-gray-200"},bt={class:"px-4 py-3 border-b-2 border-gray-200"},ft={key:0},xt=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"})],-1),yt=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"})],-1),wt=[yt],vt={class:"border-b-2 border-gray-200"},kt=["onClick"],$t=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})],-1),Lt=[$t],Vt={__name:"index",props:{employees:Object,paginate:Object,userRole:Object,alertMessage:String,defaultShiftId:Object,userNum:Number},setup(u){const d=u,m=r=>{const e=d.employees.find(o=>o.id===r);if(e&&e.employee_number===d.userNum){alert("このユーザは削除できません");return}L.Inertia.delete(route("admins.destroy",{admin:r}),{onBefore:()=>confirm("本当に削除しますか?")}),location.reload()};function a(){alert("勤務時間登録を行なってください。")}return(r,e)=>(s(),n(_,null,[c(b(H),{title:"従業員管理ページ"}),c(j,{userRole:d.userRole.authority},{default:x(()=>[t("div",Y,[t("div",tt,[t("div",et,[t("div",ot,[c(I),t("section",st,[t("div",rt,[it,t("div",nt,[c(b(y),{as:"button",href:r.route("admins.create"),class:"text-white bg-indigo-600 border-0 py-2 px-6 focus:outline-none hover:bg-indigo-700 rounded"},{default:x(()=>[at]),_:1},8,["href"])]),t("div",lt,[t("table",dt,[ct,t("tbody",null,[(s(!0),n(_,null,k(d.employees,(o,g)=>(s(),n("tr",{key:o.id,class:$({"even:bg-gray-50 odd:bg-whit":g%2===1})},[t("td",ut,p(o.employee_number),1),t("td",mt,p(o.name),1),t("td",ht,p(o.role),1),t("td",pt,[c(J,{authority:o.authority,id:o.id,role:o.role},null,8,["authority","id","role"])]),o.temporary_password?(s(),n("td",_t,p(o.temporary_password),1)):(s(),n("td",gt,"設定済み")),t("td",bt,[d.defaultShiftId[o.id]?(s(),n("div",ft,[c(b(y),{as:"button",href:r.route("defaultShifts.edit",{defaultShift:d.defaultShiftId[o.id]??0}),dusk:"edit-page-button",class:"text-white text-nowrap border-b-2 bg-indigo-600 mt-1 border-0 py-2 px-2 focus:outline-none hover:bg-indigo-700 rounded flex items-center justify-center w-11 h-11"},{default:x(()=>[xt]),_:2},1032,["href"])])):(s(),n("div",{key:1,onClick:a,class:"text-white text-nowrap border-b-2 bg-indigo-600 mt-1 border-0 py-2 px-2 focus:outline-none hover:bg-indigo-700 rounded flex items-center justify-center w-11 h-11"},wt))]),t("td",vt,[t("button",{onClick:i=>m(o.id),class:"text-white border-b-2 ml-2 bg-red-600 mt-1 border-0 py-2 px-2 focus:outline-none hover:bg-red-700 rounded flex items-center justify-center"},Lt,8,kt)])],2))),128))])]),c(X,{class:"mt-6 flex justify-end",links:d.paginate.links},null,8,["links"])])])])])])])])]),_:1},8,["userRole"])],64))}};export{Vt as default};
